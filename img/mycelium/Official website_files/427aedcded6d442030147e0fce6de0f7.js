function clearUrlParams(){var url=window.location.origin+window.location.pathname;window.history.pushState({},'',url)}
jQuery(function($){$(".reset-filter").click(function(e){e.preventDefault();$('gmp-advanced-marker').show();$('.filter').css('min-height','');$(".tablinks").removeClass("active");$(".tabcontent").fadeOut(0).removeClass("active");$("#Type").fadeIn(200).addClass("active");$(".tablinks").first().addClass("active");$('.map-wrap').hide()})});$(document).ready(function(){$(".tabcontent").hide();$("#Type").fadeIn(200).addClass("active");$(".tablinks").first().addClass("active");$(".tablinks").click(function(e){e.preventDefault();var tabId=$(this).attr("href").substring(1);if(!$(this).hasClass("active")){$(".tablinks").removeClass("active");$(".tabcontent").fadeOut(0).removeClass("active");$(this).addClass("active");$("#"+tabId).fadeIn(300).addClass("active")}})});function handleLazyLoaders(){[].forEach.call(document.querySelectorAll('[data-img-src]'),function(img){var isBackgroundImage=$(img).prop('nodeName')!=='IMG';if(onLoad===!0){$(img).addClass('loading')}
if(isElementXPercentInViewport(img,10)){var temp=new Image();temp.src=$(img).attr('data-img-src');temp.onload=function(){if(isBackgroundImage){$(img).css({'background-image':'url('+temp.src+')'})}else{$(img).attr('src',temp.src)}
$(img).removeClass('loading')}}});onLoad=!1}
var $container;var filters={};var qsRegexSearch;$(function(){var $filterDisplay=$('#filter-display');var $container=$('#container').isotope({itemSelector:'.grid-item',percentPosition:!0,initLayout:!1,layoutMode:'fitRows',fitRows:{columnWidth:'.item-sizer',gutter:'.gutter-sizer',},});$container.isotope('on','arrangeComplete',function(){$('#container').addClass('show');$('#options').addClass('show');$('.loader-wrap').removeClass('show')});$container.isotope();$('#sort').on('click','a',function(){var sortValue=$(this).attr('data-sort-value');$container.isotope({sortBy:sortValue})});$('#sort').each(function(i,buttonGroup){var $buttonGroup=$(buttonGroup);$buttonGroup.on('click','a',function(){$buttonGroup.find('.is-checked').removeClass('is-checked');$(this).addClass('is-checked')})});$(".reset-filter").click(function(){filters={};$(".option-set input").prop("checked",!1);$("label").removeClass("selected");$('.quicksearchkey').val('');$('.no-items').hide();$("input.all + label").addClass("selected");$('input.all').addClass('checked');$('input.all').prop('checked',!0);var newURL=location.href.split("?")[0];window.history.pushState('object',document.title,newURL);$container.isotope({filter:'*'});$filterDisplay.text('')});$("input.all + label").addClass("selected");$('input.all').addClass('checked');$('input.all').prop('checked',!0);function getComboFilter(filters){var i=0;var comboFilters=[];var message=[];for(var prop in filters){message.push(filters[prop].join(' '));var filterGroup=filters[prop];if(!filterGroup.length){continue}
if(i===0){comboFilters=filterGroup.slice(0)}else{var filterSelectors=[];var groupCombo=comboFilters.slice(0);for(var k=0,len3=filterGroup.length;k<len3;k++){for(var j=0,len2=groupCombo.length;j<len2;j++){filterSelectors.push(groupCombo[j]+filterGroup[k])}}
comboFilters=filterSelectors}
i++}
var comboFilter=comboFilters.join('');return comboFilter}
$('.option-set').on('change',function(jQEvent){var $checkbox=$(jQEvent.target);manageCheckbox($checkbox);handleLazyLoaders();comboFilter=getComboFilter(filters);$('.quicksearchkey').val('');function getUrlParameter(name){name=name.replace(/[\[]/,'\\[').replace(/[\]]/,'\\]');var regex=new RegExp('[\\?&]'+name+'=([^&#]*)');var results=regex.exec(location.search);return results===null?'':decodeURIComponent(results[1].replace(/\+/g,' '))};var urlParams=getUrlParameter('filter');const urlParamsArray=urlParams.split(" ");urlParams=urlParams.replace(/\ /g,'.');if(urlParams.length>0){urlParams='.'+urlParams;var comboDateFilter=urlParams+comboFilter;$container.isotope({filter:comboDateFilter});$filterDisplay.text(comboDateFilter);console.log(comboDateFilter)}else{$container.isotope({filter:comboFilter});$filterDisplay.text(comboFilter);console.log(comboFilter);var filteredItems=$container.isotope('getFilteredItemElements');var filteredIds=filteredItems.map(function(item){return $(item).data('id')});$('gmp-advanced-marker').show();$('gmp-advanced-marker').each(function(){var markerId=$(this).attr('title');var markerId=parseInt(markerId,10);if(filteredIds.includes(markerId)){$(this).show()}else{$(this).hide()}})}
if(!$container.data('isotope').filteredItems.length){$('.no-items').show()}else{$('.no-items').hide()}
var target=$('.title-content');if(target.length){$('html,body').animate({scrollTop:target.offset().top},1000)}});var $quicksearchkeyword=$('.quicksearchkey').keydown(debounce(function(){$(".option-set input").prop("checked",!1);$("label").removeClass("selected");$("input.all + label").addClass("selected");$('input.all').addClass('checked');$('input.all').prop('checked',!0);qsRegexSearch=new RegExp($quicksearchkeyword.val(),'gi');$container.isotope({filter:function(){return qsRegexSearch?$(this).text().match(qsRegexSearch):!0}});var filteredItems=$container.isotope('getFilteredItemElements');var filteredIds=filteredItems.map(function(item){return $(item).data('id')});$('gmp-advanced-marker').show();$('gmp-advanced-marker').each(function(){var markerId=$(this).attr('title');var markerId=parseInt(markerId,10);if(filteredIds.includes(markerId)){$(this).show()}else{$(this).hide()}});if(!$container.data('isotope').filteredItems.length){$('.no-items').show()}else{$('.no-items').hide()}
handleLazyLoaders()},200));function debounce(fn,threshold){var timeout;threshold=threshold||100;return function debounced(){clearTimeout(timeout);var args=arguments;var _this=this;function delayed(){fn.apply(_this,args)}
timeout=setTimeout(delayed,threshold)}}});function manageCheckbox($checkbox){var checkbox=$checkbox[0];var group=$checkbox.parents('.option-set').attr('data-group');var filterGroup=filters[group];if(!filterGroup){filterGroup=filters[group]=[]}
$checkbox.addClass('checked');$(".selected-tags label[for='"+$checkbox.attr("id")+"']").toggleClass("selected");var isAll=$checkbox.hasClass('all');if(isAll){delete filters[group];console.log('all checked');clearUrlParams();$checkbox.siblings(isAll).prop("checked",!1);$checkbox.siblings('input + label').removeClass('selected');$checkbox.siblings('.selected-tags label').removeClass('selected');$("label[for='"+$checkbox.attr("id")+"']").addClass("selected");if(!checkbox.checked){checkbox.checked='checked'}}
var index=$.inArray(checkbox.value,filterGroup);if(checkbox.checked){var selector=isAll?'input':'input.all';$checkbox.siblings(selector).prop("checked",!1);if(!isAll&&index===-1){$checkbox.siblings('input.all + label').removeClass('selected');$checkbox.siblings('input.all').removeClass('checked');filters[group].push(checkbox.value);$checkbox.siblings('input.all').prop('checked',!1)}}else if(!isAll){filters[group].splice(index,1);if(!$checkbox.siblings('[checked]').length){$checkbox.siblings('input.all').prop('checked',!1)}}}
$(".option-set input").click(function(){$("label[for='"+$(this).attr("id")+"']").toggleClass("selected");$(".selected-tags label[for='"+$(this).attr("id")+"']").toggleClass("selected")});$(document).ready(function(){$("input#alltypes").click(function(){console.log('type clicked');$("label.select-type").removeClass("selected")});$("input#alldates").click(function(){$("label.select-date").removeClass("selected")});$("input#alldisciplines").click(function(){$("label.select-discipline").removeClass("selected")});$("input#alllocations").click(function(){$("label.select-location").removeClass("selected")})});document.addEventListener('DOMContentLoaded',function(){const lazyBackgrounds=document.querySelectorAll('.lazy-bg');if('IntersectionObserver' in window){let lazyObserver=new IntersectionObserver(function(entries,observer){entries.forEach(function(entry){if(entry.isIntersecting){let el=entry.target;let bg=el.getAttribute('data-bg');if(bg){const img=new Image();img.src=bg;img.onload=function(){el.style.backgroundImage='url('+bg+')';el.classList.add('lazy-loaded');el.removeAttribute('data-bg');lazyObserver.unobserve(el)}}}})},{rootMargin:'0px 0px 200px 0px'});lazyBackgrounds.forEach(function(el){lazyObserver.observe(el)})}})
;